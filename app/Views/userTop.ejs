<html>
  <%- include('app/Views/template/head') -%>
  <body>
    <div id="page">
      <div id="header">
      <a href="/"><img style="border:none" src="/public/logo.png" width="192" height="85" alt="Retwis"></a>
      <%- include('app/Views/template/navbar') -%>
      </div>

      <div id="postform">
        <% if (isMyTimeline) {%>
          <form method="POST" action="/post">
            <%= user.getName() %>, what you are doing?
            <br>
            <table>
            <tr><td><textarea cols="70" rows="3" name="status"></textarea></td></tr>
            <tr><td align="right"><input type="submit" name="doit" value="Update"></td></tr>
            </table>
          </form>
          <div id="homeinfobox">
            <%= followersCount %> followers<br>
            <%= followingCount %> following<br>
          </div>
        <% } %>
        <% if (user !== null) {%>
          <h2 class="username"><%= user.getName() %></h2>
          <% if (showFollow) {%>
            <% if (following) {%>
              <a href="/unfollow?uid=<%= user.getId() %>" class="button">Stop following</a>
            <% } else { %>
              <a href="/follow?uid=<%= user.getId() %>" class="button">Follow this user</a>
            <% } %>
          <% } %>
        <% } %>
      </div>
    
        <% page.getPosts().forEach(function (post) { %>
          <div class="post">
            <a class="username" href="profile?u=<%= post.getUser().getName() %>"><%= post.getUser().getName() %></a>
            <%= post.getBody() %>
            <br>
            <i>posted <%= post.strElapsed(new Date()) %> ago via web</i>
          </div>
        <% }) %>
        <% if (page.getPosts().length === 0) { %>
          <div>no posts alive</div>
        <% } %>

        <% if (page.getPrev() !== false || page.getNext() !== false ){ %>
          <div class="rightlink">
            <% if (page.getPrev() !== false) {%>
              <a href="<%= isMyTimeline ? '/' : '/profile' %>?start=<%= page.getPrev() %><%= (!isMyTimeline) ? `&u=${user.getName()}` : '' %>">Newer posts &raquo;</a>
            <% } %>
            <% if (page.getNext() !== false) {%>
              <a href="<%= isMyTimeline ? '/' : '/profile' %>?start=<%= page.getNext() %><%= (!isMyTimeline) ? `&u=${user.getName()}` : '' %>">Older posts &raquo;</a>
            <% } %>
          </div>
        <% } %>
      </div>
      <%- include('app/Views/template/footer') -%>
      </div>
</body>
</html>